{% extends "CoreBundle::base.html.twig" %}
{% block css %}
{{core_global.linkcss('bundles/core/css/manage.css')}}
<style type="text/css">
/*	#fileInput {
		width: 75px;
	}*/
	.input-xs {
		border: none !important;
		background: none !important;
	}
	#fileBtn {
		position: relative;
		padding-left: 65px;
	}
	#fileInput{
		left: 0;
		cursor: pointer;
	    opacity: 0; 
	    position: absolute;
	    top: 0;
	    width: 100%;
	    height: 30px;
	    line-height: 30px;
	}
	.chooice {
		width: 100% !important;
		padding: 5px 0 !important;
		text-indent: 15px;
	}
	.file.btn {
		position: absolute;
		top: 0;
		left: 0;
	}
</style>
{% endblock %}
{% block js %}
<script type="text/javascript">
    seajs.use(['jqmodal'], function(){
		{% if error ==0 and msg is defined and msg %}
		topJQuery = typeof parent.document == "undefined" ? $ : top.$;
		topJQuery('.jq-modal-act').data('returnValue', '{{ msg }}')
			.jqModal('hide');
		{%  endif %}
		$("#fileInput").on('change',function () {
			var files = this.files;
			if (files.length == 1) {
				$('.chooice').val(files[0].name);
			} else {
				$('.chooice').val(files.length + '个文件');
			};
		})
	});
    </script>
{% endblock %}
{% block body %}
<div></div>
{% set width = app.request.get('width', 100) %}
{% set height = app.request.get('height', 100) %}
{% set multiple = app.request.get('multiple', 0) %}
<div style="background: #fefbe4; border: 1px solid #f3ecb9; color: #993300; padding: 10px; width: 90%; margin: 40px auto 5px auto;">{{ msg is defined and error is defined and error>0?msg:'选中文件后点击上传按钮或者点击“从素材库选择”直接从已上传文件中选择' }}</div>
<form enctype="multipart/form-data" class="form" action="{{ action|U }}" method="POST" style="font-size: 14px; padding: 30px 20px 10px 20px;">
	<p id="picsize" style="margin-bottom: 20px">
	   {# <span style='color:#930; font-size:14px;margin-bottom:20px;'>图片最佳尺寸：宽{{ width }}px 高{{ height }}px</span> #}
	   <input type='hidden' name='width' value='{{ width }}' />
       <input type='hidden' name='height' value='{{ height }}' />
	</p>
	<p>
		<div>
			<div style="font-size: 14px;">
				选择本地文件{{ multiple?"（多选）":"（单选）" }}：<br>
				<br>
				{# <input type="file" style="width: 80%; border: 1px solid #ddd"
					name="photo[]" {{ multiple?"multiple='multiple'":"" }}></input> #}
				<div id="fileBtn">
					{# <a class="file btn">浏览..</a> #} 
					{# <input type="file" id="fileInput" name="photo[]" {{ multiple?"multiple='multiple'":"" }}>
					<input type="text" name="input1" readonly="true" class="chooice input-xs"> #}
					<a class="file btn">浏览..</a>
					<input type="text" name="input1" readonly="true" class="chooice"> 
					<input type="file" id="fileInput" name="photo[]" {{ multiple?"multiple='multiple'":"" }}></input>
				</div>
			</div>
			<div style="padding: 20px 0; text-align: center;">
				<input id="submitbtn" type="submit" class="btnGreen btn" value="上传" onclick="this.value='上传中...'"></input>
			</div>

	</p>
</form>
{% endblock body %}


{% block footer %}
{% endblock footer %}