{{'
{% extends \'AutoBundle::mainlayout.html.twig\' %}

{% block js %}
<script type="text/javascript">
    
</script>
{% endblock %}
{% block mainMenu %}
    {{ parent() }}
    {{lists.mainMenu(action, \'分类\')}}
{% endblock %}

{% block tableMain %}
<section>

    {{lists.oprate([
        \'search|name,ename|品牌名称/拼音\'
    ])}}
    <div data-is-part="1" class="list-con">
        <table data-level="top" data-type="toggle" class="right-table table-hover">
            <tbody>
                <tr>
                    <th width="60" class="tac">ID</th>
                    <th width="40">&nbsp;</th>
                    <th>名称</th>
                    <th width="100">排序</th>
                    <th width="200" class="tac">操作</th>
                </tr>
                {# {{dump(ident)}} #}
                {% if ident.info is defined %}
                {# 一级 #}
                {% for key,item in ident.info.data %}
                    {% set next1 = (\'db.cate_cars\')|getAll({pid: item.id}) %}
                <tr data-level="1" data-url="{{ (action ~ \'/save\')|U(\'id=\' ~ item.id) }}">
                    <td class="tac">{{item.id}}</td>
                    <td class="tac {% if next1 %}plusico{% endif %}"></td>
                    <td><span data-item-edit="name" class="edit">{{item.name}}</span></td>
                    <td><span data-item-edit="sort" class="edit">{{item.sort}}</span></td>
                    <td>
                        {{forms.show((action ~ \'/show\')|U(\'id=\'~item.id))}}
                        {{forms.delete((action ~ \'/delete\')|U(\'id=\'~item.id))}}
                        {{forms.show((action ~ \'/show\')|U(\'pid=\'~item.id ~ \'&level=1\'), \'添加子分类\')}}
                    </td>
                </tr>
                {% if next1.data is defined %}
                <tr data-level="next" class="subtr">
                    <td colspan="6">
                        <table class="subright-table">
                            {% for item1 in next1.data %}
                            {% set next2 = (\'db.cate_cars\')|getAll({pid: item1.id}) %}
                            <tr data-level="1" data-url="{{ (action ~ \'/save\')|U(\'id=\' ~ item1.id) }}">
                                <td width="60" class="tac">{{item1.id}}</td>
                                <td width="40" class="tac pl20 {% if next2 %}plusico{% endif %}"></td>
                                <td><span data-item-edit="name" class="edit">{{item1.name}}</span></td>
                                <td width="100"><span data-item-edit="sort" class="edit">{{item1.sort}}</span></td>
                                <td width="200">
                                    {{forms.show((action~\'/show\')|U(\'id=\'~item1.id ~ \'&level=1\'))}}
                                    {{forms.delete((action~\'/delete\')|U(\'id=\'~item1.id))}}
                                    {{forms.show((action~\'/show\')|U(\'pid=\'~item1.id ~ \'&level=2\'), \'添加子分类\')}}
                                </td>
                            </tr>
                            <tr data-level="next" class="subtr">
                                <td colspan="6">
                                    <table class="subright-table">
                                        {% if next2.data is defined %}
                                        {% for item2 in next2.data %}
                                            <tr data-url="{{ (action ~ \'/save\')|U(\'id=\' ~ item2.id) }}">
                                                <td width="60" class="tac">{{item2.id}}</td>
                                                <td width="40" class="tac pl40 font-ico-plus12"></td>
                                                <td><span data-item-edit="name" class="edit">{{item2.name}}</span></td>
                                                <td width="100"><span data-item-edit="sort" class="edit">{{item2.sort}}</span></td>
                                                <td width="200">
                                                    {{forms.show((action~\'/show\')|U(\'id=\'~item2.id ~ \'&level=2\'))}}
                                                    {{forms.delete((action~\'/delete\')|U(\'id=\'~item2.id))}}
                                                </td>
                                            </tr>
                                        {% endfor %}
                                        {% endif %}
                                    </table>
                                </td>
                            </tr>
                            {% endfor %}
                        </table>
                    </td>
                </tr>
                {% endif %}
                {% endfor %}
                {% endif %}
            </tbody>
        </table>
        {{lists.page(ident.info)}}
    </div>
</section>
{% endblock %}

{% block promptUl %}
提示说明
{% endblock %}
'}}