{% extends 'HousemobileBundle::base_ajax.html.twig' %}
{# 说明
** ajax调用：需求列表
** fabu_btn：是否显示发布按钮
#}
{% block result %}
{# {% set models = app.request.get('models') %} #}
{% set models = 'houses' %}
{% set uid = app.request.get('uid') %}
{% set handlistAid = ('house.collects')|getCol('aid', {models: models, uid: uid}) %}
{% set handlist = ('house.' ~ models)|getAll({checked: 1, id: 'in|' ~ handlistAid|default(0)|join(','), _multi: 1, pageSize: 15, pageIndex: app.request.get('pageIndex', 1) }) %}
    {% spaceless %}
    {% if handlist.data is defined and handlist.pageCount|default(0) != 0 %}
        {% for item in handlist.data  %}
            <li {% if loop.last %}data-page="{
                        pageIndex: {{handlist.pageIndex}},
                        pageCount: {{handlist.pageCount}},
                        pageSize: {{handlist.pageSize}}
                     }"{% endif %} >
                <a href="{{('houses/detail')|UU({id: item.id|default('')})}}" class="item-content p-default">
                    <div class="item-media por">
                        {{- core_global.img({
                            src: item.thumb|default(''),
                            alt: item.name|default(''),
                            type: 2,
                            width: 107,
                            height: 80
                        }) -}}
                        {% if kft|default('1') %}
                            {% if item.top|default('') %}
                                <div class="item-zd">顶</div>
                            {% endif %}
                        {% endif %}
                    </div>
                    <div class="item-inner">
                        <div class="item-title-row">
                            {{housemobile_global.list_title({title: item.name|default('')})}}
                            <div class="item-after">
                                {{house_global.if_dj({value: item.dj|default(''),class: 'l p-red'})}}                        
                            </div>
                        </div>
                        {% if kft|default('1') %}
                            {% if item.bdsm|default('') %}
                            <div class="item-subtitle item-subtitle-ex">
                                <span class="p-red">{{item.bdsm|default('-')}}</span>
                            </div>
                            {% endif %}
                        {% else %}
                            <div class="item-subtitle item-subtitle-ex">
                                主力户型：{{- house_global.huxing({aid: item.fromid|default(''),zlhx: 0, tpl: "
                                    <span class='mr10'>%shi%%ting%%mj%m&sup2;</span>
                                    "}) -}}
                            </div>
                        {% endif %}
                        <div class="item-subtitle item-subtitle-ex">
                            {{item.address|default('地址')}}
                        </div>
                        <div class="blank3"></div>
                        <div class="item-subtitle item-subtitle-ex">
                            {{core_global.region({id: item.region|default(''), tpl: '<span class="button button-sm btn-1">%value%</span>'})}}
                            {{core_global.formData({value: item.cate_type|default(''), tpl: '<span class="button button-sm btn-2">%value%</span>'})}}
                            {{ core_global.formData({value: item.cate_status|default(''), tpl: '<span class="button button-sm btn-3">%value%</span>'}) }}
                            {{ core_global.formData({value: item.zxcd|default(''), tpl: '<span class="button button-sm btn-4">%value%</span>'}) }}
                        </div>
                    </div>
                </a>
            </li>
        {% endfor %}
    {% else %}
        <li class="mobile-list-none">暂无新房收藏</li>
    {% endif %}
    {% endspaceless %}
{% endblock result %}