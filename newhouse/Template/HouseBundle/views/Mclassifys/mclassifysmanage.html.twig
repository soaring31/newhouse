
{% extends 'HouseBundle::base_manage_block.html.twig' %}
{% set pid = app.request.get('pid') %}
{% block js %}
<script type="text/javascript">
    
</script>
{% endblock %}
{% block mainMenu %}
    {{ parent() }}
    {{core_manage.mainMenu(action, '类系')}}
{% endblock %}

{% block tableMain %}

{{ core_manage.filter() }}
<section class="list-con" data-height="430" data-param="{
    defUrl    : '{{ (action)|U }}',
    showUrl   : '{{ (action ~ "/show")|U }}',
    submitUrl : '{{ (action ~ "/save")|U }}',
    deleteUrl : '{{ (action ~ "/delete")|U }}',
    fixed     : '.filter',
    list      : '.list-con',
    data      : {
            pid:'{{pid}}'
}
}">
    <div class="list">
        <table data-level="top" data-type="singleToggle" class="right-table table-hover">
            <tbody>
                <tr>
                    <th width="50" class="tac">ID</th>
                    <th width="40">&nbsp;</th>
                    <th>类系名称</th>
                    <th width="80" class="tac">标识</th>
                    <th width="80" class="tac">排序</th>
                    <th width="200" class="tac">操作</th>
                </tr>
                
              
                {% if ident.info.data is defined %}
                {# 一级 #}
                {% for key,item in ident.info.data %} 
                   
                <tr data-level="1" data-id="{{item.menu.id}}">
                    <td class="tac">{{item.menu.id}}</td>
                    <td class="tac {% if item.nodes %}plusico{% endif %}">&nbsp;</td>
                   
                    <td><span data-role="itemEdit" data-item-edit="value" class="edit">{{item.menu.name}}</span></td>
                     <td class="tac" width="80">{{item.menu.ename}}</td>
                    <td><span class="tac" data-role="itemEdit" data-item-edit="sort" data-size="5" class='edit'>{{item.menu.sort|default(0)}}</span></td>
                    <td>
                        {{core_manage.show()}}
                        {{core_manage.delete()}}
                        {{core_manage.show({
                            url: (action~'/show')|U({pid:item.menu.id,ename:item.menu.ename}),
                            title: '添加子菜单'
                        })}}
                        {# {{core_manage.show({
                            url: (action~'/show')|U('pid='~item.menu.id,'ename='~item.menu.ename),
                            title: '添加子菜单'
                        })}} #}
                    </td>
                </tr>
                {% if item.nodes is defined %}
                <tr data-level="next" class="subtr">
                    <td colspan="6">
                        <table class="subright-table">
                            {# 二级 #}
                            {% for item1 in item.nodes %}
                            <tr data-level="1" data-id="{{ item1.menu.id}}">
                                <td width="50" class="tac">{{item1.menu.id}}</td>
                                <td width="40" class="tac pl20 {% if item1.nodes %}plusico{% endif %}">&nbsp;</td>
                                <td><span data-role="itemEdit" data-item-edit="value" class='edit'>{{item1.menu.name}}</span></td>
                                <td width="80" class="tac">{{item1.menu.ename}}</td>
                                <td width="80"><span class="tac" data-role="itemEdit" data-item-edit="sort" data-size="5" class='edit'>{{item1.menu.sort|default(0)}}</span></td>
                                <td width="200">
                                    {{core_manage.show()}}
                                    {{core_manage.delete()}}
                                     {{core_manage.show({
                            url: (action~'/show')|U({pid:item.menu.id,ename:item.menu.ename}),
                            title: '添加子菜单'
                        })}}
                                </td>
                            </tr>
                            
                             {% if item1.nodes is defined %}
                <tr data-level="next" class="subtr">
                    <td colspan="6">
                        <table class="subright-table">
                            {# 二级 #}
                            {% for item2 in item.nodes %}
                            <tr data-level="1" data-id="{{ item2.menu.id}}">
                                <td width="50" class="tac">{{item2.menu.id}}</td>
                                <td width="40" class="tac pl20 {% if item2.nodes %}plusico{% endif %}">&nbsp;</td>
                                <td><span data-role="itemEdit" data-item-edit="value" class='edit'>{{item2.menu.name}}</span></td>
                                <td width="80" class="tac">{{item2.menu.ename}}</td>
                                <td width="80"><span class="tac" data-role="itemEdit" data-item-edit="sort" data-size="5" class='edit'>{{item2.menu.sort|default(0)}}</span></td>
                                <td width="200">
                                    {{core_manage.show()}}
                                    {{core_manage.delete()}}
                                    
                                </td>
                            </tr>
                            


                            
                            {% endfor %}
                        </table>
                    </td>
                </tr>
                {% endif %}

                            
                            {% endfor %}
                        </table>
                    </td>
                </tr>
                {% endif %}
                {% endfor %}
                {% endif %}
            </tbody>
        </table>
    </div>
     {{core_manage.page(ident.info)}}
</section>
{% endblock %}


{% block promptUl %}
提示说明
{% endblock %}

