{% extends 'HouseBundle::base_manage_block.html.twig' %}

{% block js %} 
<script type="text/javascript">
    
</script> 
{% endblock %}
{% block mainMenu %}
    {{ parent() }}
    {{core_manage.mainMenu(action, '栏目')}}
{% endblock %}

{% block tableMain %}
<section class="maincontent" data-param="{
    defUrl    : '{{ (action)|U }}',
    showUrl   : '{{ (action ~ "/show")|U }}',
    submitUrl : '{{ (action ~ "/save")|U }}',
    deleteUrl : '{{ (action ~ "/delete")|U }}',
    fixed     : '.filter',
    list      : '.list-con',
    data      : {}
}">
{{ core_manage.filter() }}
<section class="list-con">
  <table data-level="top" data-type="singleToggle" class="right-table table-hover">
    <tbody>
      <tr>
        <th width="50" class="tac">ID</th>
        <th width="40">&nbsp;</th>
        <th>栏目名称</th>
        <th width="80">排序</th>
        <th width="200" class="tac">操作</th>
      </tr>
    {% if ident.info.data is defined %}
    {# 一级 #}
    
    {% for key,item in ident.info.data %}
    <tr data-level="1" data-url="{{item.menu.id}}">
      <td class="tac">{{item.menu.id}}</td>
      <td class="tac {% if item.nodes %}plusico{% endif %}">&nbsp;</td>
      <td><span data-role="itemEdit" data-item-edit="name" class="edit">{{item.menu.name}}</span></td>
      <td><span data-role="itemEdit" data-item-edit="sort" class='edit'>{{item.menu.sort|default(0)}}</span></td>
      <td> {{core_manage.show()}}
        {{core_manage.delete()}}
        
        {{core_manage.show({
        url: (action~'/show')|U('pid='~item.menu.id),
        title: '添加子菜单'
        })}} </td>
    </tr>
    {% if item.nodes is defined %}
    <tr data-level="next" class="subtr">
      <td colspan="6">
      <table class="subright-table">
          {# 二级 #}
          {% for item1 in item.nodes %}
          <tr data-level="1" data-url="{{ item1.menu.id}}">
            <td width="50" class="tac">{{item1.menu.id}}</td>
            <td width="40" class="tac pl20 {% if item1.nodes %}plusico{% endif %}">&nbsp;</td>
            <td><span data-role="itemEdit" data-item-edit="name" class='edit'>{{item1.menu.name}}</span></td>
            <td width="80"><span data-role="itemEdit" data-item-edit="sort" class='edit'>{{item1.menu.sort|default(0)}}</span></td>
            <td width="200"> {{core_manage.show()}}
              {{core_manage.delete()}}
              {{core_manage.show({
              url: (action~'/show')|U('pid='~item1.menu.id),
              title: '添加子菜单'
              })}} </td>
          </tr>
          <tr data-level="next" class="subtr">
            <td colspan="6" >
            <table class="subright-table">
                {% if item1.nodes is defined %}
                {# 三级 #}
                {% for item2 in item1.nodes %}
                <tr data-level="1" data-url="{{item2.menu.id}}">
                  <td width="50" class="tac">{{item2.menu.id}}</td>
                  <td width="40" class="tac pl40 {% if item1.nodes %}plusico{% endif %}">&nbsp;</td>
                  <td><span data-role="itemEdit" data-item-edit="name" class='edit'>{{item2.menu.name}}</span></td>
                  <td width="80"><span data-role="itemEdit" data-item-edit="sort" class='edit'>{{item2.menu.sort|default(0)}}</span></td>
                  <td width="200"> {{core_manage.show()}}
                    {{core_manage.delete()}}
                    {{core_manage.show({
                    url: (action~'/show')|U('pid='~item2.menu.id),
                    title: '添加子菜单'
                    })}} </td>
                </tr>
                <tr data-level="next" class="subtr">
    <td colspan="6">
        <table class="subright-table">
            {% if item1.nodes is defined %} {# 四级 #} 
            {% for item3 in item2.nodes %}
            <tr data-url="{{item3.menu.id}}">
                <td width="50" class="tac">{{item3.menu.id}}</td>
                <td width="40" class="pl40">&nbsp;</td>
                <td><span data-role="itemEdit" data-item-edit="name" class='edit'>{{item3.menu.name}}</span></td>
                <td width="80"><span data-role="itemEdit" data-item-edit="sort" class='edit'>{{item3.menu.sort|default(0)}}</span></td>
                <td width="200">
                    {{core_manage.show()}} {{core_manage.delete()}}
                </td>
            </tr>
            {% endfor %} {% endif %}
        </table>
    </td>
</tr>

                {% endfor %}
                {% endif %}
              </table>
            </td>
          </tr>
          {% endfor %}
        </table></td>
    </tr>
    {% endif %}
    {% endfor %}
    {% endif %}
      </tbody>
    
  </table>
</section>
</section>
{% endblock %}


{% block promptUl %}
提示说明

{% endblock %} 